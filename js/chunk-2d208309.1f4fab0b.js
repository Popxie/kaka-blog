(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d208309"],{a477:function(s,e,t){"use strict";t.r(e);var a=t("2877"),n=Object(a.a)({},(function(){var s=this;s.$createElement;return s._self._c,s._m(0)}),[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("section",[t("html",[t("head"),t("body",[t("h1",[s._v("如何半自动化地部署到"),t("a",{attrs:{href:"https://pages.github.com/"}},[s._v("GitHub Pages")])]),t("h2",[s._v("前言")]),t("blockquote",[t("p",[s._v("因为自己有一个 GitHub Pages 项目专门做一些日常笔记，期间遇到了会遇到一些问题，刚好有空闲就写下这篇文章做个笔记来记录整个过程。"),t("br"),s._v(" 主要讲了如何通过脚本将编译后的 dist 文件，发布到自己的 GitHub Pages。以及在发布过程当中遇到的问题。过程比较详细 请耐心阅读··· 🌚"),t("br"),s._v(" 所谓的半自动化意思很明显，就是部署依旧需要人的参与才可完成部署。😂")])]),t("p",[s._v("项目目录")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("├── README.md\n├── babel.config.js\n├── deploy.sh\n├── node_modules\n├── package-lock.json\n├── package.json\n├── public\n├── src\n├── vue.config.js\n└── yarn.lock\n")])]),t("h2",[s._v("1.半自动部署发布")]),t("h3",[s._v("1.1 创建脚本 "),t("code",{pre:!0},[s._v("deploy.sh")]),s._v("文件")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[t("span",{pre:!0,attrs:{class:"hljs-meta"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# 当发生错误时中止脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("set")]),s._v(" -e\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# 构建")]),s._v("\nnpm run build:prod\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# cd 到构建输出的目录下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("cd")]),s._v(" dist\n\ngit init\ngit add -A\ngit commit -m "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'deploy'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# 部署到 https://<USERNAME>.github.io")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# 部署到 https://<USERNAME>.github.io/<REPO>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages")]),s._v("\ngit push -f git@github.com:Popxie/kaka-blog.git master:gh-pages\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("cd")]),s._v(" -\n")])]),t("h3",[s._v("1.2 执行第一步的文件")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("sudo sh ./deploy.sh\n")])]),t("blockquote",[t("p",[s._v("在执行过程当中你可能会出现以下问题（即 git push -f 会出错）")])]),t("p",[s._v("错误提示如下")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("已初始化空的 Git 仓库于 /Users/KaKa/Desktop/kaka-blog/dist/.git/\n[master（根提交） 5d44f5d] deploy\n 96 files changed, 117 insertions(+)\n create mode 100644 css/home.e3f20bd1.css\n create mode 100644 css/index.aba1125b.css\n ·\n ·\nWarning: Permanently added the RSA host key "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" IP address "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'192.30.255.112'")]),s._v(" to the list of known hosts.\ngit@github.com: Permission denied (publickey).\nfatal: 无法读取远程仓库。\n\n请确认您有正确的访问权限并且仓库存在。\n")])]),t("p",[t("strong",[s._v("如何解决这个问题？")])]),t("p",[s._v("先上答案"),t("br"),s._v(" 执行如下命令：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("git pull origin master --allow-unrelated-histories\n")])]),t("p",[s._v("执行后输出结果如下：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("来自 github.com:Popxie/kaka-blog\n * branch              master     -> FETCH_HEAD\n已经是最新的。\n")])]),t("p",[s._v("================== "),t("code",{pre:!0},[s._v("处理过程 start")]),s._v(" ===============")]),t("p",[s._v("刚开始你可能会很蒙蔽 然后 "),t("code",{pre:!0},[s._v("百度")]),s._v("||"),t("code",{pre:!0},[s._v("谷歌")]),s._v(" 查关键词 "),t("code",{pre:!0},[s._v("git@github.com: Permission denied (publickey)")])]),t("p",[s._v("最后查到这边帖子"),t("a",{attrs:{href:"https://www.zhihu.com/question/21402411"}},[s._v("github 提示 Permission denied··· ")])]),t("p",[s._v("然后你会在文章中看到这个命令:")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("ssh -T git@github.com\n")])]),t("p",[s._v("执行输出结果：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("Hi Popxie! You"),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ve successfully authenticated, but GitHub does not provide shell access.\n")])])]),t("p",[s._v("然后 "),t("code",{pre:!0},[s._v("百度")]),s._v("||"),t("code",{pre:!0},[s._v("谷歌")]),s._v(" 查关键词 "),t("code",{pre:!0},[s._v("You've successfully authenticated, but GitHub does not provide shell access")]),s._v(" 😂")]),t("p",[s._v("最后你会看到这个帖子"),t("a",{attrs:{href:"https://blog.csdn.net/zhangyu4863/article/details/81592728"}},[s._v("错误 You've successfully···")]),s._v("得到解决方案")]),t("p",[s._v("================== "),t("code",{pre:!0},[s._v("处理过程 end")]),s._v(" ===============")]),t("h3",[s._v("1.3 再次执行脚本命令")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("sudo sh ./deploy.sh\n")])]),t("p",[s._v("输出如下：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("已初始化空的 Git 仓库于 /Users/hhdd/Desktop/kaka-blog/dist/.git/\n[master（根提交） 51e123b] deploy\n 96 files changed, 117 insertions(+)\n create mode 100644 css/chunk-f9bc824a.2ecf191b.css\n create mode 100644 css/chunk-vendors.ef3f11fe.css\n ·\n ·\n枚举对象: 102, 完成.\n对象计数中: 100% (102/102), 完成.\n使用 4 个线程进行压缩\n压缩对象中: 100% (102/102), 完成.\n写入对象中: 100% (102/102), 1.70 MiB | 669.00 KiB/s, 完成.\n总共 102（差异 8），复用 0（差异 0），包复用 0\nremote: Resolving deltas: 100% (8/8), "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("done")]),s._v(".\nTo github.com:Popxie/kaka-blog.git\n + bc9aca5...51e123b master -> gh-pages (forced update)\n/Users/KaKa/Desktop/kaka-blog\n")])]),t("p",[t("strong",[s._v("恭喜~")]),s._v(" 发布成功")]),t("h2",[s._v("参考文献")]),t("p",[t("a",{attrs:{href:"https://pages.github.com/"}},[s._v("GitHub Pages")])])])])])}],!1,null,null,null);e.default=n.exports}}]);